# This config was automatically generated from your source code
# Stacks detected: deps:go:.
version: 2.1

parameters:
  canary:
    type: boolean
    default: false

jobs:
  test-go:
    # Install go modules and run tests
    docker:
      - image: cimg/go:1.21.1
    steps:
      - checkout
      - run:
        environment:
          CANARY: << pipeline.parameters.canary >>
        command: |
          set -o errexit
          set -o nounset
          set -o pipefail
          set -o xtrace
          echo "export CANARY=${CANARY}"
      - run: sleep 15s
workflows:
  build-and-test:
    jobs:
      - test-go:
          filters:  # required since `deploy` has tag filters AND requires `build`
            tags:
              only: /.*/
    # - deploy:
    #     requires:
    #       - test-go
